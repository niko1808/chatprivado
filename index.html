<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Chat Privado üí¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">

  <!-- Modal simple -->
  <style>
.modal {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.65);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal.show {
  display: flex;
}

/* Caja del modal */
.modal-box {
  background: #111;
  color: #fff;

  width: 90%;
  max-width: 420px;

  max-height: 85vh;        /* CLAVE */
  overflow-y: auto;        /* CLAVE */

  padding: 20px;
  border-radius: 14px;
  text-align: left;

  box-shadow: 0 20px 50px rgba(0,0,0,.7);
}

/* T√≠tulo */
.modal-box h2 {
  margin: 0 0 12px;
  text-align: center;
  font-size: 20px;
}

/* Texto */
.modal-box p {
  font-size: 14px;
  line-height: 1.55;
  opacity: .9;
}

/* C√≥digo */
.modal-box code {
  display: block;
  background: #1e1e1e;
  padding: 10px;
  margin: 10px 0;
  border-radius: 8px;
  font-size: 13px;
  user-select: all;
  word-break: break-all;
}

/* Bot√≥n */
.modal-box button {
  margin-top: 14px;
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: none;
  font-weight: 600;
  cursor: pointer;
}

/* Scrollbar */
.modal-box::-webkit-scrollbar {
  width: 8px;
}

.modal-box::-webkit-scrollbar-track {
  background: #1a1a1a;
  border-radius: 10px;
}

.modal-box::-webkit-scrollbar-thumb {
  background: #444;
  border-radius: 10px;
}

.modal-box::-webkit-scrollbar-thumb:hover {
  background: #666;
}

/* Pantallas chicas */
@media (max-height: 600px) {
  .modal-box {
    max-height: 90vh;
  }
}

    .donate-btn {
  margin-left: auto;
  padding: 4px 10px;          /* üëà m√°s angosto */
  font-size: 13px;
  height: 28px;
  line-height: 1;
  background: #0f172a;
  color: #22c55e;
  font-weight: bold;
  border-radius: 8px;
  border: 1px solid #22c55e;
  cursor: pointer;
  position: relative;
  z-index: 1;
  overflow: hidden;
}

/* Halo neon */
.donate-btn::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 10px;
  background: linear-gradient(
    90deg,
    #22c55e,
    #4ade80,
    #22c55e
  );
  opacity: 0.7;
  filter: blur(6px);
  z-index: -1;
  animation: neonPulse 2.5s linear infinite;
}

/* Animaci√≥n neon */
@keyframes neonPulse {
  0% {
    filter: blur(4px);
    opacity: 0.2;
  }
  50% {
    filter: blur(8px);
    opacity: 0.5;
  }
  100% {
    filter: blur(4px);
    opacity: 0.2;
  }
}

/* Hover */
.donate-btn:hover {
  color: #a7f3d0;
  border-color: #4ade80;
}

  </style>

<!-- ================= MODAL LEGAL ================= -->
  <div class="modal show" id="legalModal">
    <div class="modal-box">
      <h2>üìú T√©rminos de uso</h2>

      <div style="max-height:60vh;overflow-y:auto;padding-right:6px">

        <h3>1. Descripci√≥n del servicio y finalidad</h3>
        <p>
          Este software es una herramienta de comunicaci√≥n privada y temporal,
          dise√±ada para permitir el intercambio de mensajes entre personas que
          ya se conocen previamente, mediante salas protegidas por un c√≥digo
          √∫nico de acceso.
        </p>
        <p>
          Su finalidad principal es facilitar comunicaciones directas,
          confidenciales y ef√≠meras, tales como intercambios profesionales,
          t√©cnicos o empresariales, sin almacenamiento permanente de datos ni
          historial de conversaciones.
        </p>
        <p>
          La aplicaci√≥n no funciona como red social, plataforma p√∫blica de
          mensajer√≠a ni sistema de contacto entre desconocidos.
        </p>

        <h3>2. Naturaleza del servicio</h3>
        <p>
          El desarrollador act√∫a exclusivamente como proveedor de una herramienta
          t√©cnica neutral.
        </p>
        <ul>
          <li>No intermedia contenidos</li>
          <li>No modera conversaciones</li>
          <li>No almacena mensajes</li>
          <li>No registra historial</li>
          <li>No tiene acceso al contenido transmitido</li>
        </ul>

        <h3>3. Responsabilidad del uso</h3>
        <p>
          El uso de esta aplicaci√≥n es exclusiva responsabilidad del usuario.
        </p>
        <p>
          El autor y desarrollador,
          <strong>Rodrigo Nicol√°s Mercado</strong>, no supervisa ni controla las
          comunicaciones.
        </p>
        <p>
          Cada usuario es responsable del contenido que env√≠a, recibe o comparte.
        </p>

        <h3>4. Usos prohibidos</h3>
        <ul>
          <li>Actividades ilegales</li>
          <li>Acoso o violencia</li>
          <li>Difusi√≥n de contenido ilegal</li>
          <li>Suplantaci√≥n de identidad</li>
          <li>Uso fraudulento o delictivo</li>
        </ul>

        <h3>5. Edad m√≠nima</h3>
        <p>
          El uso est√° limitado a personas mayores de 18 a√±os.
        </p>
        <p>
          El desarrollador no verifica la edad y no asume responsabilidad por
          declaraciones falsas.
        </p>

        <h3>6. Limitaci√≥n de responsabilidad</h3>
        <p>
          El desarrollador no ser√° responsable por da√±os o conflictos derivados
          del uso indebido de la aplicaci√≥n.
        </p>

        <h3>7. Funcionamiento</h3>
        <ul>
          <li>Un usuario crea una sala</li>
          <li>Se genera un c√≥digo √∫nico</li>
          <li>El c√≥digo se comparte voluntariamente</li>
          <li>La comunicaci√≥n es privada y temporal</li>
        </ul>

        <h3>8. Donaciones</h3>
        <p>
          La aplicaci√≥n se sostiene mediante donaciones voluntarias.
        </p>

        <h3>9. Aceptaci√≥n</h3>
        <p>
          Al usar esta aplicaci√≥n, el usuario acepta √≠ntegramente estos t√©rminos.
        </p>

      </div>

      <label style="display:block;margin:12px 0;font-size:13px">
        <input type="checkbox" id="legalCheck">
        Tengo 18+ a√±os y he le√≠do, entendido y acepto todas las condiciones.
      </label>

      <button id="legalAccept" disabled>
        Aceptar y continuar
      </button>
    </div>
  </div>



<!-- ================= INPUT IMAGEN ================= -->
<input type="file" id="imgInput" accept="image/*" hidden>

<script>
/* ===== MODAL LEGAL ===== */
(function(){
  const modal = document.getElementById("legalModal");
  const check = document.getElementById("legalCheck");
  const btn = document.getElementById("legalAccept");
/*
  if (localStorage.getItem("legalAccepted")==="true") {
    modal.classList.remove("show");
    return;
  }
*/
  document.body.style.overflow="hidden";
  check.onchange = ()=> btn.disabled = !check.checked;
  btn.onclick = ()=>{
  modal.classList.remove("show");
  document.body.style.overflow="";
};
})();
</script>

</head>
<body>

<div class="phone">

  <header style="display:flex;align-items:center;gap:10px">
    <div class="avatar big"></div>
    <div style="flex:1">
      <h1 style="display:flex;align-items:center;gap:10px">
        Chat Privado
        <button id="donateBtn" class="donate-btn">‚ù§Ô∏è Donar</button>
      </h1>
      <span id="status">üî¥ No conectado</span>
    </div>
  </header>

  <div class="controls">
    <button id="create">Crear chat</button>
    <button id="copy" disabled>üìã Copiar c√≥digo</button>
    <button id="destroy" disabled>üóëÔ∏è Eliminar chat</button>
  </div>

  <div class="join-box">
    <input id="joinInput" placeholder="Peg√° c√≥digo de 6 d√≠gitos">
    <button id="pasteBtn">üìã Pegar</button>
    <button id="joinBtn">Conectar</button>
  </div>

  <div class="link-box" id="linkBox" hidden>
    <input id="roomLink" readonly>
  </div>

  <div id="messages" class="messages"></div>

  <div class="input">
    <input id="messageInput" placeholder="Mensaje..." disabled>
    <button id="send" disabled>‚û§</button>
  </div>

</div>

<!-- MODAL DONACIONES -->
<div class="modal" id="donateModal">
  <div class="modal-box">
    <h2>‚ù§Ô∏è Apoy√° este proyecto</h2>
    <p>
      Este chat privado se mantiene gracias a donaciones an√≥nimas.
      Tu aporte ayuda a pagar infraestructura, mantener el servicio
      y seguir mejor√°ndolo.
    </p>

    <p><strong>Datos para donar:</strong></p>

    <code>
      Alias: axnsoft.corp<br>
      Titular: Rodrigo Nicolas Mercado<br>
      Banco: Mercado Pago
    </code>

    <p>Las donaciones son totalmente voluntarias y an√≥nimas.</p>

    <button id="closeDonate">Cerrar</button>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script src="firebase.js"></script>
<script src="contentFilter.js"></script>
<script src="chat.js"></script>

<script>
  const donateBtn = document.getElementById("donateBtn");
  const donateModal = document.getElementById("donateModal");
  const closeDonate = document.getElementById("closeDonate");

  donateBtn.onclick = () => donateModal.classList.add("show");
  closeDonate.onclick = () => donateModal.classList.remove("show");
  donateModal.onclick = e => {
    if (e.target === donateModal) donateModal.classList.remove("show");
  };
</script>

</body>
</html>
