<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Chat Privado üí¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">

  <!-- Modal simple -->
  <style>
    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal.show { display: flex; }
    .modal-box {
      background: #111;
      color: #fff;
      padding: 20px;
      border-radius: 12px;
      max-width: 360px;
      width: 90%;
      text-align: center;
    }
    .modal-box h2 { margin-bottom: 10px; }
    .modal-box p { font-size: 14px; opacity: .9; }
    .modal-box code {
      display: block;
      background: #222;
      padding: 10px;
      margin: 10px 0;
      border-radius: 6px;
      user-select: all;
    }
    .modal-box button {
      margin-top: 12px;
    }
    .donate-btn {
  margin-left: auto;
  padding: 4px 10px;          /* üëà m√°s angosto */
  font-size: 13px;
  height: 28px;
  line-height: 1;
  background: #0f172a;
  color: #22c55e;
  font-weight: bold;
  border-radius: 8px;
  border: 1px solid #22c55e;
  cursor: pointer;
  position: relative;
  z-index: 1;
  overflow: hidden;
}

/* Halo neon */
.donate-btn::before {
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 10px;
  background: linear-gradient(
    90deg,
    #22c55e,
    #4ade80,
    #22c55e
  );
  opacity: 0.7;
  filter: blur(6px);
  z-index: -1;
  animation: neonPulse 2.5s linear infinite;
}

/* Animaci√≥n neon */
@keyframes neonPulse {
  0% {
    filter: blur(4px);
    opacity: 0.2;
  }
  50% {
    filter: blur(8px);
    opacity: 0.5;
  }
  100% {
    filter: blur(4px);
    opacity: 0.2;
  }
}

/* Hover */
.donate-btn:hover {
  color: #a7f3d0;
  border-color: #4ade80;
}

  </style>

  <!-- ================= MODAL LEGAL ================= -->
<div class="modal show" id="legalModal">
  <div class="modal-box">
    <h2>üìú Aviso legal</h2>
    <p>
      Este software permite el intercambio de mensajes privados.<br><br>
      El autor <strong>Rodrigo Nicolas Mercado</strong> no se responsabiliza
      por el uso que el usuario haga del sistema.
      <br><br>
      El uso implica aceptaci√≥n total de esta condici√≥n.
    </p>

    <label style="display:block;margin-top:10px;font-size:13px">
      <input type="checkbox" id="legalCheck">
      Acepto y asumo toda responsabilidad
    </label>

    <button id="legalAccept" style="margin-top:12px" disabled>Aceptar</button>
  </div>
</div>

<!-- ================= INPUT IMAGEN ================= -->
<input type="file" id="imgInput" accept="image/*" hidden>

<script>
/* ===== MODAL LEGAL ===== */
(function(){
  const modal = document.getElementById("legalModal");
  const check = document.getElementById("legalCheck");
  const btn = document.getElementById("legalAccept");

  if (localStorage.getItem("legalAccepted")==="true") {
    modal.classList.remove("show");
    return;
  }

  document.body.style.overflow="hidden";
  check.onchange = ()=> btn.disabled = !check.checked;
  btn.onclick = ()=>{
    localStorage.setItem("legalAccepted","true");
    modal.classList.remove("show");
    document.body.style.overflow="";
  };
})();
</script>

</head>
<body>

<div class="phone">

  <header style="display:flex;align-items:center;gap:10px">
    <div class="avatar big"></div>
    <div style="flex:1">
      <h1 style="display:flex;align-items:center;gap:10px">
        Chat Privado
        <button id="donateBtn" class="donate-btn">‚ù§Ô∏è Donar</button>
      </h1>
      <span id="status">üî¥ No conectado</span>
    </div>
  </header>

  <div class="controls">
    <button id="create">Crear chat</button>
    <button id="copy" disabled>üìã Copiar c√≥digo</button>
    <button id="destroy" disabled>üóëÔ∏è Eliminar chat</button>
  </div>

  <div class="join-box">
    <input id="joinInput" placeholder="Peg√° c√≥digo de 6 d√≠gitos">
    <button id="pasteBtn">üìã Pegar</button>
    <button id="joinBtn">Conectar</button>
  </div>

  <div class="link-box" id="linkBox" hidden>
    <input id="roomLink" readonly>
  </div>

  <div id="messages" class="messages"></div>

  <div class="input">
    <input id="messageInput" placeholder="Mensaje..." disabled>
    <button id="send" disabled>‚û§</button>
  </div>

</div>

<!-- MODAL DONACIONES -->
<div class="modal" id="donateModal">
  <div class="modal-box">
    <h2>‚ù§Ô∏è Apoy√° este proyecto</h2>
    <p>
      Este chat privado se mantiene gracias a donaciones an√≥nimas.
      Tu aporte ayuda a pagar infraestructura, mantener el servicio
      y seguir mejor√°ndolo.
    </p>

    <p><strong>Datos para donar:</strong></p>

    <code>
      Alias: axnsoft.corp<br>
      Titular: Rodrigo Nicolas Mercado<br>
      Banco: Mercado Pago
    </code>

    <p>Las donaciones son totalmente voluntarias y an√≥nimas.</p>

    <button id="closeDonate">Cerrar</button>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script src="firebase.js"></script>
<script src="chat.js"></script>

<script>
  const donateBtn = document.getElementById("donateBtn");
  const donateModal = document.getElementById("donateModal");
  const closeDonate = document.getElementById("closeDonate");

  donateBtn.onclick = () => donateModal.classList.add("show");
  closeDonate.onclick = () => donateModal.classList.remove("show");
  donateModal.onclick = e => {
    if (e.target === donateModal) donateModal.classList.remove("show");
  };
</script>

</body>
</html>
